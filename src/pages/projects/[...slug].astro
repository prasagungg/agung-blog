---
import { type CollectionEntry, getCollection } from 'astro:content';
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import Background from '../../components/Background.astro';


export async function getStaticPaths() {
	const posts = await getCollection('projects');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

type Props = CollectionEntry<'projects'>;

const post = Astro.props;
const { Content } = await post.render();
---

<!doctype html>
<html lang="id">
	<head>
		<BaseHead title={post.data.title} description={post.data.description} />
	</head>

	<body class="bg-[#080d1a] text-slate-100 flex flex-col min-h-screen font-['Barlow',sans-serif] overflow-x-hidden selection:bg-cyan-400 selection:text-black">
		<Header />
		<Background />

		<main class="grow w-full max-w-3xl mx-auto px-6 py-10 relative z-10 flex flex-col gap-8">
            
            <a href="/projects" class="inline-flex items-center gap-2 text-cyan-400 hover:text-white transition-colors font-bold uppercase tracking-wider text-sm w-fit group">
                <span class="transform group-hover:-translate-x-1 transition-transform">«</span> 
                Back to Archives
            </a>

            <article>
                {post.data.heroImage && (
                    <div class="relative w-full h-75 md:h-100 mb-8 rounded-lg overflow-hidden border border-cyan-500/30 shadow-[0_0_30px_rgba(34,211,238,0.1)] group">
                        <img 
                            src={post.data.heroImage} 
                            alt={post.data.title} 
                            class="w-full h-full object-cover"
                        />
                        <div class="absolute inset-0 bg-linear-to-t from-[#080d1a] via-transparent to-transparent opacity-80"></div>
                        <div class="absolute inset-0 bg-[linear-gradient(transparent_50%,rgba(0,0,0,0.5)_50%)] bg-size[100%_4px] opacity-10 pointer-events-none"></div>
                    </div>
                )}

                <div class="border-b border-cyan-500/30 pb-6 mb-8">
                    <div class="flex flex-wrap gap-2 mb-4">
                        {post.data.stacks.map((t) => (
                            <span class="text-[10px] uppercase font-bold px-2 py-1 bg-[#001E43] text-cyan-400 border border-cyan-900/50 rounded-sm">
                                {t}
                            </span>
                        ))}
                    </div>
                    
                    <h1 class="text-4xl md:text-5xl font-black italic text-white uppercase leading-tight mb-2 tracking-tighter">
                        {post.data.title}
                    </h1>
                    <p class="text-slate-400 font-light text-lg italic">
                        {post.data.description}
                    </p>
                </div>

                {post.data.link && (
                    <div class="mb-10">
                        <a href={post.data.link} target="_blank" class="inline-block px-6 py-3 bg-cyan-600 hover:bg-cyan-500 text-black font-black uppercase italic tracking-wider transform skew-x-12 transition-all hover:-translate-y-1 shadow-[4px_4px_0px_rgba(255,255,255,0.2)]">
                            <span class="block skew-x-12">Open Live Project ↗</span>
                        </a>
                    </div>
                 )}

                <div class="markdown-content">
                    <Content />
                </div>
            </article>

		</main>
		<Footer />
	</body>
</html>